# Wallet Service Project

## توضیحات کلی

این پروژه یک سرویس مدیریت کیف پول است که با استفاده از NestJS، PostgreSQL، Redis و RabbitMQ پیاده‌سازی شده است. این سرویس قابلیت ایجاد، به‌روزرسانی و تحلیل کیف پول‌های ارز دیجیتال را فراهم می‌کند.

## ویژگی‌های اصلی

- تحلیل تراکنش‌های کیف پول
- ذخیره‌سازی داده‌ها در PostgreSQL
- استفاده از Redis برای کش‌گذاری
- استفاده از RabbitMQ برای مدیریت صف و پردازش ناهمگام
- API RESTful برای تعامل با سرویس
- ایجاد و مدیریت کیف پول‌های ارز دیجیتال با پشتیبانی از چندین شبکه بلاکچین
- تحلیل پیشرفته تراکنش‌های کیف پول شامل:
  - محاسبه میانگین مبلغ خرید، نرخ موفقیت، سود خالص و زمان نگهداری
  - شناسایی و دسته‌بندی فعالیت‌های معاملاتی (مانند "Dex Trader")
  - تشخیص فعالیت‌های مشکوک به ربات
- تحلیل عملکرد توکن‌ها شامل:
  - شناسایی توکن‌های پرسود
  - محاسبه قیمت‌های ورود و خروج
  - تحلیل الگوهای خرید و فروش

## نحوه راه‌اندازی

1. نصب وابستگی‌ها:
   ```
   npm install
   ```

2. تنظیم فایل `.env`:
   ```
   DATABASE_URL=postgresql://root:7V36pDHYak9uKbvCZXk5mX0J@apo.liara.cloud:32615/postgres
   REDIS_HOST=apo.liara.cloud
   REDIS_PORT=30000
   RABBITMQ_URL=amqp://localhost:5672
   ```

3. اجرای برنامه:
   ```
   npm run start:dev
   ```

## API‌ها

- `POST /wallets`: ایجاد کیف پول جدید از روی جیسون
- `GET /wallets`: دریافت لیست تمام کیف پول‌ها
- `GET /wallets/:id`: دریافت اطلاعات یک کیف پول خاص
- `GET /analyze`: شروع تحلیل تراکنش‌های کیف پول

## راه‌حل‌های مقیاس‌پذیری

1. **استفاده از Redis برای کش‌گذاری**: 
   برای کاهش بار بر روی پایگاه داده و افزایش سرعت پاسخ‌گویی، از Redis برای ذخیره‌سازی موقت داده‌های پرکاربرد استفاده شده است.

2. **پردازش ناهمگام با RabbitMQ**: 
   برای عملیات‌های زمان‌بر مانند تحلیل تراکنش‌ها، از RabbitMQ برای ایجاد صف و پردازش ناهمگام استفاده شده است. این امر امکان مقیاس‌پذیری افقی را فراهم می‌کند.

3. **معماری ماژولار**: 
   پروژه با استفاده از معماری ماژولار NestJS ساخته شده است که امکان توسعه و نگهداری آسان‌تر را فراهم می‌کند.

4. **استفاده از ORM Sequelize**: 
   برای مدیریت بهتر ارتباط با پایگاه داده و امکان تغییر آسان پایگاه داده در آینده، از Sequelize استفاده شده است.

5. **تنظیمات محیطی**: 
   استفاده از فایل `.env` برای تنظیمات محیطی، امکان استقرار آسان در محیط‌های مختلف را فراهم می‌کند.

6. **لاگینگ و مانیتورینگ پیشرفته**: 
   پیاده‌سازی سیستم لاگینگ ساختاریافته و قابل جستجو با استفاده از ELK stack، همراه با داشبوردهای مانیتورینگ برای نظارت بر عملکرد سیستم.

## نحوه مقیاس‌پذیری

برای مقیاس‌پذیری بیشتر، می‌توان از روش‌های زیر استفاده کرد:

1. **استقرار چندگانه**: 
   می‌توان چندین نمونه از سرویس را پشت یک لود بالانسر اجرا کرد.

2. **جداسازی سرویس‌ها**: 
   در صورت نیاز، می‌توان بخش‌های مختلف (مثلاً تحلیل تراکنش‌ها) را به سرویس‌های جداگانه تبدیل کرد.


## تست‌ها

برای اجرای تست‌ها:

npm run test


## مستندات API

مستندات کامل API با استفاده از Swagger در آدرس زیر قابل دسترسی است:

http://localhost:3000/api
